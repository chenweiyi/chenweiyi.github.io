---
title: git使用心得
date: 2017-08-26 10:27:01
categories:
- 技术贴
tags: git
---
平时经常使用github，clone别人的项目或者自己写项目上传到github都或多或少用到git，但是一段时间不用了又忘了命令，总要浪费些时间查资料，不胜其烦，好记性不如烂笔头，今天我想自己总结一下，加深记忆，又可以快速查阅。

下面不啰嗦直接上代码：
```bash
$ git init
```
git初始化,让当前目录处理git管理之下

```bash
$ git add <file>
```
添加文件。file可以是具体文件名，也可以是文件夹，甚至可以是`.`(表示add当前所有文件)

```bash
$ git status
```
查看当前状态，一般系统会提示下一步的操作。比如是否需要commit , push 等操作

```bash
$ git commit -m "message"
```
提交文件到版本库，类似于保存了一个“快照”，需要时可以切换到想去的版本，每个版本都有一个唯一id,代表这个版本。
切换版本请用`git reset`命令

```bash
$ git log
$ git log --pretty=oneline
$ git log --pretty=oneline --abbrev-commit
$ git log --graph
```
打印命令可以查看历史记录，`git log`命令查看的更详细，`git log --pretty=oneline`命令更直观

```bash
$ git reset --hard HEAD^
```
有时候需要回到上一个版本或者指定版本需要用到这个命令。`HEAD`表示当前版本，`HEAD^`表示上一个版本，上上个版本就是`HEAD^^`，当前版本往上100个版本就是`HEAD~100`。当前这里也可以使用提交的id，eg. `3628164...882e1e0`，一般取**前6位**就可以。

```bash
$ git reflog
```
有时候版本切回之前的版本了，但是又想恢复到现在的版本，那如何知道现在的版本号呢？别着急，`git reflog`帮你排除忧虑，这个命令记录了你之前所有版本记录。

```bash
$ git checkout -- <file>
```
可以丢弃（discard）工作区的修改，或者已经使用过`git add`命令后又修改了工作区的内容但是想丢弃，回到`git add`时的状态。
即回到上一次`git add`或者`git commit`的状态。如果你`git add`了一些资料，但是还没有`git commmit`，这时你想丢弃暂存区的内容，可以使用命令`git reset HEAD <file>`把内容打回到工作区，再使用命令`git checkout -- <file>`把工作区的内容丢弃。如果你已经使用了`git commit`提交了内容，但是又反悔了，可以使用`git reset --hard HEAD^`返回上一个版本

```bash
$ rm <file>
```
删除文件。如果删除了文件，又反悔了，因为此时没有存储到暂存区，所以可以使用`git checkout -- <file>`恢复。

```bash
$ git rm <file>
```
删除文件。注意和`rm <file>`的区别，`git rm <file>`相当于`rm <file>` + `git add <file>`。因此若想恢复之前的状态，需要先执行`git reset HEAD <file>`打回到工作区，再执行`git checkout -- <file>`。

```bash
$ ssh-keygen -t rsa -C "youremail@example.com"
```
创建SSH Key。在用户主目录下，看看有没有.ssh目录，如果有，再看看这个目录下有没有`id_rsa`和`id_rsa.pub`这两个文件，如果已经有了，不需要创建了。如果没有，执行此命令，创建SSH Key。

```bash
$ git remote add origin git@github.com:chenweiyi/gitTest.git
```
这条命令是把本地库和github上的远程库建立关联。这个是采用ssh的方式，所以github上的ssh配置里面需要有你本地的ssh公钥。后面的`chenweiyi/gitTest`是你的github账号名和项目名。

```bash
$ git push -u origin master
```
当你首次提交文件到github时，需要输入这条命令。`push`推，表示推送到github；`origin`远程仓库名；`master`分支名；`-u`表示把本地master和远程仓库的master分支关联起来，以后再推送或者拉取时可以简化命令`git push origin master` / `git pull`

```bash
$ git clone git@github.com:chenweiyi/gitTest.git
```
从远程仓库中克隆项目到本地。当你执行这条命令时，git自动把本地`master`分支和远程库的`master`分支对应起来，远程库默认仓库名时`origin`。

```bash
$ git branch
```
查看当前项目分支

```bash
$ git branch <name>
```
创建名为*name*的分支

```bash
$ git checkout <name>
```
切换到名为*name*的分支

```bash
$ git checkout -b <name>
```
创建并切换到名为*name*的分支

```bash
$ git merge <name>
```
合并名为*name*的分支到当前分支

```bash
$ git branch -d <name>
```
删除名为*name*的分支

```bash
$ git remote
```
查看远程库的信息，`$ git remote -v` 查看更详细的信息

```bash
$ git push origin <branchName>
```
推送名为*branchName*分支到远程库。

```bash
$ git checkout -b <branchName> origin/<branchName>
```
当你从远程库克隆时，默认情况下只能看到本地master分支。可以用`git branch`命令查看下。现在要看到其他分支就必须使用这个命令创建。比如`git checkout -b dev origin/dev`就能把远程`dev`分支创建到本地

```bash
$ git pull
```
与远程库创建连接后，即可使用此命令拉取远程库分支内容到本地。如果拉取失败，则可根据提示使用`git branch --set-upstream <branchName> origin/<branchName>` 来指定本地分支`branchName`与远程分支的连接。

```bash
$ git checkout <branchName>
$ git tag <tagName>
```
首先切换到需要打标签的分支，再打标签。默认标签是打在最新提交的commit上的。有时候，如果忘了打标签，比如，现在已经是周五了，但应该在周一打的标签没有打，怎么办？方法是找到历史提交的commit id，然后打上就可以了。eg. `$ git tag v0.9 6224937`

```bash
$ git tag
```
查看所有的标签。注意，标签不是按时间顺序列出，而是按字母排序的。可以使用`git show <tagName>`查看标签信息。

```bash
$ git tag -a <tagName> -m <message> [commitID]
```
可以创建带有说明的标签，`-a` 指定标签名 ，`-m` 指定标签信息 ，`commitId` 版本id

```bash
git tag -d <tagName>
```
标签打错了可以删除标签。

```bash
git push origin <tagName>
```
创建的标签都只存储在本地，不会自动推送到远程 ，使用此命令推送到远程。或者一次性推送本地尚未推送到远程的所有标签，命令：`git push origin --tags
`

```bash
git push origin :refs/tags/<tagName>
```
如果标签已经推送到远程，要删除远程标签就麻烦一点，先从本地删除：`git tag -d v1.0`。然后再使用该命令：`git push origin :refs/tags/v1.0`

- - -

写此文的目的是为了以后查找更加方便，此文也主要记录了git操作的常用操作，对于高深的操作，平时也用不到，用到的时候在学吧。本文参考了廖雪峰大牛的[**git教程**](https://www.liaoxuefeng.com/wiki/0013739516305929606dd18361248578c67b8067c8c017b000)，谢谢！






